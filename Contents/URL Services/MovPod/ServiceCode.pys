import re, urlparse, cgi, urllib2from BeautifulSoup import BeautifulSoupUSER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/534.51.22 (KHTML, like Gecko) Version/5.1.1 Safari/534.51.22'	def MetadataObjectForURL(url): 	#Log('In MetadataObjectForURL for MovPod / DaClips (' + url + ')')		video = VideoClipObject(		title = 'MovPod / DaClips / GorillaVid Redirect Page',		summary = 'MovPod / DaClips / GorillaVid Redirect Page',		thumb = None,	)		return videodef MediaObjectsForURL(url):	# Request movpod page.	#Log('Requesting ' + url)	request = urllib2.Request(url)	request.add_header('User-agent', USER_AGENT)	response = urllib2.urlopen(request)		# Collect final url and read in MovPod page.	movpod_url = response.geturl()	#Log(movpod_url)	soup = BeautifulSoup(response.read())		# Extract out these form elements if present...	formElems = ['op', 'id', 'fname', 'method_free', 'referer', 'usr_login']	params = {}	elemFound = False		for formElem in formElems:		formElemVal =  soup.find('input', {'name' : formElem })['value']		params[formElem] = formElemVal		elemFound = True	# If any of the form elements were found, then the page was a waiting	# page and we need to request the actual video page.	if (elemFound):		#Log(params)		HTTP.Headers['User-agent'] = USER_AGENT		headers = { 'Referer': movpod_url }		soup = BeautifulSoup(HTTP.Request(movpod_url,values=params,headers=headers).content)	content = str(soup.contents)		file = re.search('file:\"(.*?)\"', content)	if (file is None):				Log('************** PROVIDER ERROR: Video URL not found on page')				# Look for error message on page.		err = soup.find('b', "msg_ok")		if (err != None):			msg = "".join(err.findAll(text=True))			Log("               Provider message: " + msg)				return []			final_url = file.group(1)	Log(final_url)		ret = []	ret.append(		MediaObject(			parts = [PartObject(key=final_url)],		)	)  	return ret